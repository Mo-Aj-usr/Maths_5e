<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QCM – Calcul littéral 5e</title>
  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f4f6fb;
      color: #222;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    .app {
      width: 95%;
      max-width: 960px;
      background: #ffffff;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.08);
      padding: 1.5rem;
      box-sizing: border-box;
      display: grid;
      grid-template-columns: 260px 1fr;
      grid-gap: 1.25rem;
    }
    .dashboard {
      border-right: 1px solid #e0e4f0;
      padding-right: 1rem;
    }
    .main {
      padding-left: 0.5rem;
    }
    h1 {
      margin: 0 0 .5rem 0;
      font-size: 1.4rem;
      color: #1f2f60;
    }
    .subtitle {
      font-size: .85rem;
      color: #666;
      margin-bottom: 1rem;
    }
    .card {
      background: #f7f8fe;
      border-radius: 10px;
      padding: .8rem;
      margin-bottom: .8rem;
    }
    .label {
      font-size: .85rem;
      color: #555;
      margin-bottom: .2rem;
    }
    .value {
      font-weight: 600;
      font-size: 1rem;
      color: #1f2f60;
    }
    .progress-bar {
      width: 100%;
      height: 10px;
      background: #e3e7ff;
      border-radius: 999px;
      overflow: hidden;
      margin-top: .4rem;
    }
    .progress-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg,#4a6cf7,#7a8ffb);
      transition: width .3s ease;
    }
    .question-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: .5rem;
      font-size: .9rem;
      color: #555;
    }
    .question-title {
      font-weight: 600;
      color: #1f2f60;
    }
    .question-text {
      margin-bottom: .5rem;
    }
    .math {
      font-family: "Fira Mono","Consolas",monospace;
      background: #eef1ff;
      padding: .15rem .25rem;
      border-radius: 4px;
    }
    .answers button {
      width: 100%;
      display: block;
      text-align: left;
      border: none;
      border-radius: 8px;
      padding: .55rem .7rem;
      margin: .25rem 0;
      background: #f1f4ff;
      cursor: pointer;
      font-size: .95rem;
      transition: background .2s, transform .05s;
    }
    .answers button:hover {
      background: #dde5ff;
      transform: translateY(-1px);
    }
    .answers button.correct {
      background: #c9f7d5;
    }
    .answers button.wrong {
      background: #ffd1d1;
    }
    .answers button:disabled {
      cursor: default;
      opacity: 0.95;
      transform: none;
    }
    .explanation {
      margin-top: .6rem;
      background: #f0f4ff;
      border-left: 4px solid #4a6cf7;
      padding: .55rem .7rem;
      border-radius: 8px;
      font-size: .9rem;
      display: none;
    }
    .nav {
      display: flex;
      justify-content: space-between;
      margin-top: .8rem;
      gap: .5rem;
    }
    .nav button {
      flex: 1;
      padding: .5rem .7rem;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-size: .9rem;
      background: #4a6cf7;
      color: #fff;
      transition: background .2s;
    }
    .nav button:disabled {
      background: #c2ccff;
      cursor: default;
    }
    .nav button:hover:not(:disabled) {
      background: #364fcc;
    }
    @media (max-width: 720px) {
      .app {
        grid-template-columns: 1fr;
      }
      .dashboard {
        border-right: none;
        border-bottom: 1px solid #e0e4f0;
        padding-right: 0;
        padding-bottom: 1rem;
      }
      .main {
        padding-left: 0;
      }
    }
  </style>
</head>
<body>
<div class="app">
  <aside class="dashboard">
    <h1>QCM – Calcul littéral 5e</h1>
    <div class="subtitle">Expressions littérales : simplifier, développer, réduire, évaluer, tester une égalité.</div>

    <div class="card">
      <div class="label">Question</div>
      <div class="value" id="qIndex">1 / 15</div>
      <div class="progress-bar">
        <div class="progress-fill" id="progress"></div>
      </div>
    </div>

    <div class="card">
      <div class="label">Score</div>
      <div class="value" id="score">0 / 15</div>
    </div>

    <div class="card">
      <div class="label">Questions déjà répondues</div>
      <div class="value" id="answered">0 / 15</div>
    </div>
  </aside>

  <main class="main">
    <div id="quiz"></div>
    <div class="nav">
      <button id="prevBtn">← Précédent</button>
      <button id="nextBtn">Suivant →</button>
    </div>
  </main>
</div>

<script>
  const questions = [
    {
      title: "Vocabulaire",
      text: "Une expression littérale est :",
      choices: [
        "Un nombre écrit avec beaucoup de chiffres.",
        "Une expression qui contient au moins une lettre représentant un nombre.",
        "Une phrase écrite en toutes lettres.",
        "Une addition de nombres entiers."
      ],
      correct: 1,
      explanation: "En 5e, une expression littérale est une expression qui comporte des nombres et au moins une lettre (variable) représentant un nombre.[1]"
    },
    {
      title: "Suppression des × inutiles",
      text: "On considère l’expression A = 5 × x + 3 × (2 × x). Écriture simplifiée correcte :",
      choices: [
        "A = 5 × × + 3(2x)",
        "A = 5x + 3 × 2x",
        "A = 5x + 3(2x)",
        "A = 5x + 6x"
      ],
      correct: 3,
      explanation: "On peut supprimer × devant une lettre ou une parenthèse : 5 × x → 5x et 3 × (2 × x) → 3(2x).[web:16]"
    },
    {
      title: "Réduire une somme",
      text: "On considère B = 5x + 6x. Écriture la plus simple :",
      choices: [
        "B = 11x",
        "B = 30x",
        "B = 5x^2 + 6x^2",
        "B = x^11"
      ],
      correct: 0,
      explanation: "5x et 6x sont des termes de même nature, on ajoute les coefficients : 5x + 6x = 11x.[web:21]"
    },
    {
      title: "Produits de lettres",
      text: "On considère C = 2 × a × a. Écriture simplifiée :",
      choices: [
        "C = 2a",
        "C = 2a^2",
        "C = a^3",
        "C = 4a"
      ],
      correct: 1,
      explanation: "a × a = a^2, donc 2 × a × a = 2a^2.[web:16]"
    },
    {
      title: "Puissances",
      text: "Parmi les expressions suivantes, laquelle est égale à 3x^2 ?",
      choices: [
        "3 × x × x",
        "3 + x + x",
        "3x",
        "x^3"
      ],
      correct: 0,
      explanation: "x^2 = x × x, donc 3x^2 = 3 × x × x.[web:21]"
    },
    {
      title: "Développer",
      text: "On considère D = 4(x + 3). Développement correct :",
      choices: [
        "D = 4x + 3",
        "D = 4x + 12",
        "D = x + 12",
        "D = 4 + 3x"
      ],
      correct: 1,
      explanation: "On distribue 4 à chaque terme : 4(x + 3) = 4x + 4×3 = 4x + 12.[web:21]"
    },
    {
      title: "Développer et réduire",
      text: "E = 2(3x + 1). Que vaut E sous forme réduite ?",
      choices: [
        "E = 6x + 1",
        "E = 6x + 2",
        "E = 5x + 1",
        "E = 3x + 2"
      ],
      correct: 1,
      explanation: "2(3x + 1) = 2×3x + 2×1 = 6x + 2.[web:21]"
    },
    {
      title: "Factoriser (mise en évidence)",
      text: "On considère F = 7x + 7. Factorisation correcte :",
      choices: [
        "F = 7(x + 1)",
        "F = 7x(1 + 1)",
        "F = x(7 + 1)",
        "F = 7(x + 7)"
      ],
      correct: 0,
      explanation: "On met 7 en facteur : 7x + 7 = 7(x + 1).[web:21]"
    },
    {
      title: "Calculer pour une valeur",
      text: "G = 4x − 5. Pour x = 3, G vaut :",
      choices: [
        "7",
        "−7",
        "12",
        "17"
      ],
      correct: 0,
      explanation: "On remplace x par 3 : G = 4×3 − 5 = 12 − 5 = 7.[web:24]"
    },
    {
      title: "Programme de calcul ↔ expression",
      text: "Programme : « choisir un nombre n, ajouter 4, puis multiplier le résultat par 3 ». Expression correspondante :",
      choices: [
        "3n + 4",
        "(n + 4) × 3",
        "n × 4 + 3",
        "3n − 4"
      ],
      correct: 1,
      explanation: "On ajoute 4 à n : n + 4, puis on multiplie par 3 : (n + 4) × 3.[web:20]"
    },
    {
      title: "Tester une égalité",
      text: "On donne les expressions P = 3(x + 2) et Q = 3x + 6. Peut‑on dire que P et Q représentent toujours le même nombre ?",
      choices: [
        "Non, elles sont différentes.",
        "Oui, car en développant, on obtient la même expression.",
        "Oui, seulement si x = 0.",
        "On ne peut jamais comparer deux expressions littérales."
      ],
      correct: 1,
      explanation: "3(x + 2) = 3x + 6 après développement, donc P et Q sont égales pour toute valeur de x.[web:21]"
    },
    {
      title: "Priorités de calcul",
      text: "H = 2 + 3x. Pour x = 4, quel calcul est correct ?",
      choices: [
        "H = 2 + 3 + 4",
        "H = 2 + 3 × 4",
        "H = (2 + 3) × 4",
        "H = 2 × 3 × 4"
      ],
      correct: 1,
      explanation: "On remplace x par 4 : 2 + 3×4. La multiplication est prioritaire : 3×4 = 12, donc H = 14.[web:21]"
    },
    {
      title: "Regrouper des termes semblables",
      text: "I = 4x + 5 − 2x + 1. Forme réduite :",
      choices: [
        "I = 2x + 6",
        "I = 6x + 6",
        "I = 2x − 4",
        "I = 4x − 2x − 6"
      ],
      correct: 0,
      explanation: "On regroupe les x : 4x − 2x = 2x, et les nombres : 5 + 1 = 6, donc I = 2x + 6.[web:16]"
    },
    {
      title: "Expression de périmètre",
      text: "Un rectangle a pour longueur x et largeur 3. Son périmètre, en cm, s’écrit :",
      choices: [
        "x + 3",
        "2x + 3",
        "2x + 6",
        "x^2 + 3"
      ],
      correct: 2,
      explanation: "P = 2×(longueur + largeur) = 2(x + 3) = 2x + 6.[web:21]"
    },
    {
      title: "Expression d’aire",
      text: "Un rectangle a pour longueur x et largeur 5. Son aire, en cm², s’écrit :",
      choices: [
        "x + 5",
        "5x",
        "x^2 + 5",
        "x/5"
      ],
      correct: 1,
      explanation: "Aire = longueur × largeur = x × 5 = 5x.[web:21]"
    },
    {
      title: "Choisir l’expression correcte",
      text: "« Le produit de 5 par la somme de x et de 2 » s’écrit :",
      choices: [
        "5x + 2",
        "5(x + 2)",
        "5x − 2",
        "x + 2 × 5"
      ],
      correct: 1,
      explanation: "« Produit de 5 par la somme de x et de 2 » signifie 5 × (x + 2), donc 5(x + 2).[web:21]"
    }
  ];

  let current = 0;
  let score = 0;
  const answered = new Array(questions.length).fill(false);

  const quizDiv = document.getElementById("quiz");
  const qIndexSpan = document.getElementById("qIndex");
  const scoreSpan = document.getElementById("score");
  const answeredSpan = document.getElementById("answered");
  const progressFill = document.getElementById("progress");
  const prevBtn = document.getElementById("prevBtn");
  const nextBtn = document.getElementById("nextBtn");

  function updateDashboard() {
    qIndexSpan.textContent = (current + 1) + " / " + questions.length;
    scoreSpan.textContent = score + " / " + questions.length;
    const answeredCount = answered.filter(v => v).length;
    answeredSpan.textContent = answeredCount + " / " + questions.length;
    const pct = ((current) / (questions.length - 1)) * 100;
    progressFill.style.width = pct + "%";
  }

  function showQuestion(index) {
    const q = questions[index];
    quizDiv.innerHTML = `
      <div class="question-header">
        <span class="question-title">${q.title}</span>
      </div>
      <div class="question-text">${q.text.replace(/x\^2/g,'<span class="math">x²</span>')}</div>
      <div class="answers">
        ${q.choices.map((c,i)=>`<button data-index="${i}">${c}</button>`).join("")}
      </div>
      <div class="explanation" id="explanation"></div>
    `;
    const buttons = quizDiv.querySelectorAll("button");
    buttons.forEach(btn => btn.addEventListener("click", handleAnswer));
    prevBtn.disabled = (index === 0);
    nextBtn.disabled = (index === questions.length - 1);
    updateDashboard();
  }

  function handleAnswer(e) {
    const selected = Number(e.currentTarget.getAttribute("data-index"));
    const q = questions[current];
    const buttons = quizDiv.querySelectorAll(".answers button");

    if (!answered[current]) {
      if (selected === q.correct) score++;
      answered[current] = true;
    }

    buttons.forEach((btn,i)=>{
      btn.disabled = true;
      if (i === q.correct) btn.classList.add("correct");
      else if (i === selected) btn.classList.add("wrong");
    });

    const exp = document.getElementById("explanation");
    exp.style.display = "block";
    exp.textContent = q.explanation;
    updateDashboard();
  }

  prevBtn.addEventListener("click", ()=>{
    if (current > 0) {
      current--;
      showQuestion(current);
    }
  });

  nextBtn.addEventListener("click", ()=>{
    if (current < questions.length - 1) {
      current++;
      showQuestion(current);
    }
  });

  showQuestion(current);
</script>
</body>
</html>
