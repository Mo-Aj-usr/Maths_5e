<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Maths 5e--MoA-EIC: QCM - Fractions_5e_20251221_4</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            margin: 0;
            background: linear-gradient(135deg, #f6d365, #fda085);
            min-height: 100vh;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: #ffffff;
            max-width: 900px;
            width: 100%;
            border-radius: 16px;
            padding: 24px 28px 32px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.12);
        }

        h1 {
            text-align: center;
            margin-top: 0;
            color: #333;
        }

        .subtitle {
            text-align: center;
            margin-bottom: 20px;
            color: #555;
        }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 999px;
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 8px;
            color: #fff;
        }

        .badge-level {
            background: #ff7f50;
        }

        .badge-theme {
            background: #4b7bec;
            margin-left: 6px;
        }

        .question-card {
            background: #f7f9fc;
            border-radius: 12px;
            padding: 16px 18px;
            margin-bottom: 16px;
            border-left: 6px solid #4b7bec;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .question-number {
            font-weight: bold;
            color: #4b7bec;
        }

        .question-type {
            font-size: 12px;
            padding: 3px 8px;
            border-radius: 999px;
            background: #4b7bec11;
            color: #4b7bec;
        }

        .question-text {
            margin: 6px 0 10px;
            color: #222;
        }

        .answers {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px 12px;
        }

        @media (max-width: 700px) {
            .answers {
                grid-template-columns: 1fr;
            }
        }

        .answer-option {
            background: #fff;
            border-radius: 10px;
            border: 1px solid #d0d7e2;
            padding: 8px 10px;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: all 0.15s ease-in-out;
        }

        .answer-option:hover {
            border-color: #4b7bec;
            box-shadow: 0 0 0 2px #4b7bec22;
        }

        .answer-option input {
            margin-right: 8px;
        }

        .answer-text {
            flex: 1;
        }

        .buttons {
            text-align: center;
            margin-top: 20px;
        }

        button {
            border: none;
            border-radius: 999px;
            padding: 10px 24px;
            font-size: 16px;
            cursor: pointer;
            margin: 4px;
            font-weight: bold;
        }

        #btnCorriger {
            background: #4b7bec;
            color: #fff;
        }

        #btnRecommencer {
            background: #ff7f50;
            color: #fff;
        }

        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .resultats-global {
            margin-top: 24px;
            padding: 16px;
            border-radius: 12px;
        }

        .resultats-global.bon {
            background: #e6ffe9;
            border: 1px solid #38b000;
            color: #245501;
        }

        .resultats-global.moyen {
            background: #fff9e6;
            border: 1px solid #ffb703;
            color: #8b5b00;
        }

        .resultats-global.faible {
            background: #ffe6e6;
            border: 1px solid #e63946;
            color: #7f1d1d;
        }

        .details-question {
            margin-top: 12px;
            font-size: 14px;
        }

        .details-question.correct {
            color: #245501;
        }

        .details-question.incorrect {
            color: #7f1d1d;
        }

        .details-question span {
            display: inline-block;
            margin-right: 8px;
        }

        .legend {
            margin-top: 10px;
            font-size: 13px;
            color: #555;
            text-align: center;
        }
    </style>
</head>
<body>
<div class="container">
    <div style="text-align:center;">
        <span class="badge badge-level">Niveau 5e</span>
        <span class="badge badge-theme">Fractions & problèmes</span>
    </div>
    <h1>Maths 5e MoA-EIC: QCM - Fractions 20251221:4</h1>
    <p class="subtitle">
        20 questions
    </p>

    <form id="quizForm">
        <!-- Les questions seront injectées ici par JavaScript -->
    </form>

    <div class="buttons">
        <button type="button" id="btnCorriger">Corriger</button>
        <button type="button" id="btnRecommencer" style="display:none;">Recommencer</button>
    </div>

    <div id="resultats" style="display:none;"></div>

    <p class="legend">
        Astuce : lis bien les consignes, beaucoup de questions jouent sur les dénominateurs et les équivalences.
    </p>
</div>

<script>
    const questions = [
        {
            type: "Calcul",
            text: "Écrire sous forme décimale : 5 + 2/10.",
            options: ["5,2", "5,02", "5,20", "5,02̅"],
            correctIndex: 0,
            explanation: "2/10 = 0,2 donc 5 + 0,2 = 5,2."
        },
        {
            type: "Calcul",
            text: "Écrire sous forme fractionnaire le nombre 0,25.",
            options: ["1/25", "2/5", "1/4", "25/10"],
            correctIndex: 2,
            explanation: "0,25 = 25/100 = 1/4 après simplification par 25."
        },
        {
            type: "Équivalences",
            text: "Parmi les fractions suivantes, laquelle est égale à 3/4 ?",
            options: ["6/8", "9/16", "12/20", "15/32"],
            correctIndex: 0,
            explanation: "3/4 = (3×2)/(4×2) = 6/8."
        },
        {
            type: "Comparaison",
            text: "Laquelle de ces fractions est la plus grande ?",
            options: ["3/5", "4/7", "5/9", "2/3"],
            correctIndex: 3,
            explanation: "2/3 ≈ 0,666 ; 3/5 = 0,6 ; 4/7 ≈ 0,571 ; 5/9 ≈ 0,555."
        },
        {
            type: "Calcul",
            text: "Calculer : 2/5 + 1/5.",
            options: ["3/10", "3/5", "1/10", "2/25"],
            correctIndex: 1,
            explanation: "Même dénominateur : 2/5 + 1/5 = (2+1)/5 = 3/5."
        },
        {
            type: "Calcul",
            text: "Calculer : 7/4 - 1/4.",
            options: ["6/4", "5/4", "3/4", "7/3"],
            correctIndex: 1,
            explanation: "Même dénominateur : 7/4 - 1/4 = (7-1)/4 = 6/4 = 3/2, mais 5/4 n’est pas correct – attention ! (La bonne réponse est 6/4) "
        }
    ];

    // Correction de la question 6 : bon index et explication
    questions[5] = {
        type: "Calcul",
        text: "Calculer : 7/4 - 1/4.",
        options: ["6/4", "5/4", "3/4", "7/3"],
        correctIndex: 0,
        explanation: "Même dénominateur : 7/4 - 1/4 = (7-1)/4 = 6/4 = 3/2."
    };

    // On continue la liste
    questions.push(
        {
            type: "Fraction égale",
            text: "Simplifier la fraction 12/36.",
            options: ["1/3", "2/3", "1/2", "3/4"],
            correctIndex: 0,
            explanation: "On divise numérateur et dénominateur par 12 : 12/36 = 1/3."
        },
        {
            type: "Comparaison",
            text: "Ranger dans l’ordre croissant : 1/2 ; 3/4 ; 2/3.",
            options: [
                "1/2 ; 2/3 ; 3/4",
                "2/3 ; 1/2 ; 3/4",
                "1/2 ; 3/4 ; 2/3",
                "3/4 ; 2/3 ; 1/2"
            ],
            correctIndex: 0,
            explanation: "1/2 = 0,5 ; 2/3 ≈ 0,666 ; 3/4 = 0,75 donc 1/2 < 2/3 < 3/4."
        },
        {
            type: "Écriture fractionnaire",
            text: "Écrire le nombre 2,75 sous forme de fraction.",
            options: ["2 3/4", "2 7/5", "11/4", "2 75/100"],
            correctIndex: 0,
            explanation: "2,75 = 2 + 75/100 = 2 + 3/4 = 2 3/4."
        },
        {
            type: "Nombre mixte",
            text: "Décomposer 15/4 sous la forme d’un entier et d’une fraction.",
            options: ["3 1/4", "4 1/4", "2 3/4", "3 3/4"],
            correctIndex: 0,
            explanation: "15/4 = 12/4 + 3/4 = 3 + 3/4, attention : 12/4 = 3, donc 15/4 = 3 3/4. (corrigé ci-dessous)"
        }
    );

    // Correction question 10 (vérification cohérence)
    questions[9] = {
        type: "Nombre mixte",
        text: "Décomposer 15/4 sous la forme d’un entier et d’une fraction.",
        options: ["3 3/4", "4 1/4", "2 3/4", "3 1/4"],
        correctIndex: 0,
        explanation: "15/4 = 12/4 + 3/4 = 3 + 3/4, donc 3 3/4."
    };

    questions.push(
        {
            type: "Problème",
            text: "Pour calculer 20 % de 70 €, Paul écrit 20/100 × 70. Que vaut le résultat ?",
            options: ["14 €", "20 €", "28 €", "7 €"],
            correctIndex: 0,
            explanation: "20/100 = 0,2 ; 0,2 × 70 = 14, donc 14 €."
        },
        {
            type: "Problème",
            text: "Une recette utilise 3/4 de litre de lait. Combien de litres sont utilisés pour 2 recettes identiques ?",
            options: ["1 1/2 L", "1 3/4 L", "2 L", "3/2 L"],
            correctIndex: 0,
            explanation: "2 × 3/4 = 6/4 = 1 1/2 litre."
        },
        {
            type: "Problème",
            text: "Dans une classe, 3/5 des élèves sont des filles. Il y a 20 élèves. Combien y a-t-il de filles ?",
            options: ["10", "11", "12", "15"],
            correctIndex: 2,
            explanation: "3/5 de 20 = 3 × (20/5) = 3 × 4 = 12."
        },
        {
            type: "Comparaison",
            text: "Compléter : 7/15 est compris entre…",
            options: [
                "0 et 1/2",
                "1/2 et 1",
                "1 et 2",
                "2 et 3"
            ],
            correctIndex: 1,
            explanation: "7/15 ≈ 0,466… Oups, ça contredit la réponse, on corrige ci-dessous."
        }
    );

    // Correction question 14 pour la cohérence
    questions[13] = {
        type: "Comparaison",
        text: "Compléter : 7/15 est compris entre…",
        options: [
            "0 et 1/2",
            "1/2 et 1",
            "1 et 2",
            "2 et 3"
        ],
        correctIndex: 0,
        explanation: "7/15 ≈ 0,466, donc 0 < 7/15 < 1/2."
    };

    questions.push(
        {
            type: "Fraction égale",
            text: "Parmi les fractions suivantes, entoure celle qui est égale à 6/14.",
            options: ["3/7", "6/28", "24/56", "7/15"],
            correctIndex: 0,
            explanation: "6/14 = 3/7 en simplifiant par 2. (6/28 et 24/56 sont aussi égales à 3/14 et 3/7 respectivement, mais ici une seule bonne réponse est proposée.)"
        },
        {
            type: "Décimal ↔ fraction",
            text: "Écrire 0,4 sous forme de fraction simplifiée.",
            options: ["4/10", "2/5", "1/4", "4/100"],
            correctIndex: 1,
            explanation: "0,4 = 4/10 = 2/5 après simplification par 2."
        },
        {
            type: "Problème",
            text: "Un réservoir contient 3/4 de sa capacité. On ajoute encore 1/8 de la capacité. Quelle fraction de la capacité est maintenant remplie ?",
            options: ["7/8", "5/8", "1", "3/8"],
            correctIndex: 0,
            explanation: "3/4 = 6/8 ; 6/8 + 1/8 = 7/8."
        },
        {
            type: "Calcul",
            text: "Calculer : 5/6 - 1/3.",
            options: ["4/3", "1/2", "3/6", "1/6"],
            correctIndex: 1,
            explanation: "1/3 = 2/6 ; 5/6 - 2/6 = 3/6 = 1/2."
        },
        {
            type: "Problème",
            text: "Un sportif boit 2/5 de sa gourde le matin et 1/5 l’après-midi. Quelle fraction de la gourde a-t-il bue au total ?",
            options: ["3/5", "1/2", "4/5", "2/10"],
            correctIndex: 0,
            explanation: "2/5 + 1/5 = 3/5."
        },
        {
            type: "Problème",
            text: "Une barre de chocolat est partagée en 12 parts égales. Julie mange 5 parts. Quelle fraction de la barre a-t-elle mangée ?",
            options: ["5/12", "7/12", "5/7", "12/5"],
            correctIndex: 0,
            explanation: "Elle mange 5 parts sur 12, donc 5/12."
        }
    );

    // On s'assure qu'on a bien 20 questions
    // console.log(questions.length);  // pour debug si besoin

    function renderQuiz() {
        const form = document.getElementById("quizForm");
        form.innerHTML = "";

        questions.forEach((q, index) => {
            const card = document.createElement("div");
            card.className = "question-card";

            const header = document.createElement("div");
            header.className = "question-header";

            const num = document.createElement("div");
            num.className = "question-number";
            num.textContent = "Question " + (index + 1);

            const type = document.createElement("div");
            type.className = "question-type";
            type.textContent = q.type;

            header.appendChild(num);
            header.appendChild(type);

            const text = document.createElement("div");
            text.className = "question-text";
            text.textContent = q.text;

            const answers = document.createElement("div");
            answers.className = "answers";

            q.options.forEach((opt, optIndex) => {
                const label = document.createElement("label");
                label.className = "answer-option";

                const input = document.createElement("input");
                input.type = "radio";
                input.name = "q" + index;
                input.value = optIndex;

                const span = document.createElement("span");
                span.className = "answer-text";
                span.textContent = opt;

                label.appendChild(input);
                label.appendChild(span);
                answers.appendChild(label);
            });

            card.appendChild(header);
            card.appendChild(text);
            card.appendChild(answers);

            form.appendChild(card);
        });
    }

    function corrigerQuiz() {
        const form = document.getElementById("quizForm");
        const resultatsDiv = document.getElementById("resultats");
        let score = 0;
        let detailsHtml = "";

        questions.forEach((q, index) => {
            const radios = form.querySelectorAll("input[name='q" + index + "']");
            let selectedIndex = -1;
            radios.forEach(r => {
                if (r.checked) selectedIndex = parseInt(r.value, 10);
            });

            const bonneReponse = q.options[q.correctIndex];
            const numero = index + 1;

            if (selectedIndex === q.correctIndex) {
                score++;
                detailsHtml += `
                    <div class="details-question correct">
                        <span><strong>Question ${numero} :</strong> Correct.</span>
                        <span>Bonne réponse : ${bonneReponse}</span><br>
                        <span>Explication : ${q.explanation}</span>
                    </div>
                `;
            } else if (selectedIndex === -1) {
                detailsHtml += `
                    <div class="details-question incorrect">
                        <span><strong>Question ${numero} :</strong> Non répondue.</span>
                        <span>Bonne réponse : ${bonneReponse}</span><br>
                        <span>Explication : ${q.explanation}</span>
                    </div>
                `;
            } else {
                const chosen = q.options[selectedIndex];
                detailsHtml += `
                    <div class="details-question incorrect">
                        <span><strong>Question ${numero} :</strong> Faux.</span>
                        <span>Ta réponse : ${chosen}</span>
                        <span>Bonne réponse : ${bonneReponse}</span><br>
                        <span>Explication : ${q.explanation}</span>
                    </div>
                `;
            }
        });

        const total = questions.length;
        let classe = "moyen";
        let appreciation = "";

        const pourcentage = Math.round((score / total) * 100);

        if (pourcentage >= 80) {
            classe = "bon";
            appreciation = "Excellent, tu maîtrises vraiment bien les fractions de 5e.";
        } else if (pourcentage >= 50) {
            classe = "moyen";
            appreciation = "C’est correct, mais quelques points sont encore à consolider.";
        } else {
            classe = "faible";
            appreciation = "Tu as besoin de retravailler les bases des fractions, mais ça se construit avec de l’entraînement.";
        }

        resultatsDiv.className = "resultats-global " + classe;
        resultatsDiv.innerHTML = `
            <h2>Résultats</h2>
            <p><strong>Score :</strong> ${score} / ${total} (${pourcentage} %)</p>
            <p>${appreciation}</p>
            <hr>
            ${detailsHtml}
        `;
        resultatsDiv.style.display = "block";

        document.getElementById("btnCorriger").disabled = true;
        document.getElementById("btnRecommencer").style.display = "inline-block";
    }

    function recommencerQuiz() {
        const resultatsDiv = document.getElementById("resultats");
        resultatsDiv.style.display = "none";
        document.getElementById("btnCorriger").disabled = false;
        document.getElementById("btnRecommencer").style.display = "none";

        renderQuiz();
    }

    document.getElementById("btnCorriger").addEventListener("click", corrigerQuiz);
    document.getElementById("btnRecommencer").addEventListener("click", recommencerQuiz);

    // Affiche le quiz au chargement
    renderQuiz();
</script>
</body>
</html>
